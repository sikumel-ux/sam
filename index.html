<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login MOYA</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body style="background: var(--primary); display: flex; align-items: center; justify-content: center; height: 100vh;">
  <div class="card" style="width: 100%; max-width: 320px; text-align: center;">
    <h1 style="color:var(--primary); margin-bottom:0;">MOYA</h1>
    <p style="margin-bottom:20px; font-size:12px; color:#888;">Admin Access</p>
    <input type="text" id="u" placeholder="Username">
    <div style="position:relative">
      <input type="password" id="p" placeholder="Password">
      <i class="fas fa-eye" id="eye" onclick="togglePass()" style="position:absolute; right:15px; top:15px; color:#ccc"></i>
    </div>
    <button onclick="login()" id="btnLogin" class="btn-submit">MASUK</button>
  </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbxsUJ_vgSx3m1sXCcHkbBN-gFPyt5EjO2IMTXbHQPeWOEcqoy544jAB5XPznrfh6018cw/exec";
    
    function togglePass() {
      const p = document.getElementById('p');
      p.type = p.type === 'password' ? 'text' : 'password';
    }

    async function login() {
      const u = document.getElementById('u').value;
      const p = document.getElementById('p').value;
      const btn = document.getElementById('btnLogin');
      btn.disabled = true; btn.innerText = "Checking...";
      
      try {
        const res = await fetch(`${API_URL}?action=login&u=${u}&p=${p}`);
        const data = await res.json();
        if(data.success) {
          sessionStorage.setItem("isLoggedIn", "true");
          window.location.href = "admin.html";
        } else {
          Swal.fire('Gagal', 'User/Pass Salah!', 'error');
        }
      } catch(e) { alert("Server Error"); }
      btn.disabled = false; btn.innerText = "MASUK";
    }
  </script>
</body>
</html>
